<loading-overlay [loading]="loading">
  <div class="submission-info-container d-flex">
    <div class="img mr-1" *ngIf="!hideForReload" (click)="fileChange.click()">
      <img *ngIf="submission.submissionType === 'SUBMISSION'" [src]="submission.id | thumbnail: 'PRIMARY' | async | toBase64: '50' | safe" [alt]="submission.fileInfo.name" [title]="submission.fileInfo.name">
      <mat-icon *ngIf="submission.submissionType === 'JOURNAL'">comment</mat-icon>
      <i *ngIf="submission.problems && submission.problems.length" class="fas fa-exclamation-triangle problem-icon warn-text"></i>
    </div>
    <form [formGroup]="form" class="submission-controls">
      <input formControlName="title" maxlength="50" [placeholder]="'Title' | translate" class="w-100 submission-input">
      <input formControlName="schedule" [placeholder]="'Schedule' | translate" class="w-100 submission-input" [owlDateTime]="dtPicker" [owlDateTimeTrigger]="dtPicker">
      <owl-date-time #dtPicker></owl-date-time>
      <mat-select formControlName="rating" [placeholder]="'Rating' | translate" required>
        <mat-option value="General">{{ 'General' | translate }}</mat-option>
        <mat-option value="Mature">{{ 'Mature' | translate }}</mat-option>
        <mat-option value="Adult">{{ 'Adult' | translate }}</mat-option>
        <mat-option value="Extreme">{{ 'Extreme' | translate }}</mat-option>
      </mat-select>
    </form>

  </div>
  <div class="control-btns row no-gutters">
    <div class="col">
      <button class="btn btn-sm bordered" [class.btn-link]="!editing" [class.btn-secondary]="editing" [class.clear-border]="editing" [matTooltip]="'Edit' | translate" (click)="toggleEditing()">
        <mat-icon>edit</mat-icon>
      </button>
    </div>
    <div class="col">
      <button class="btn btn-sm btn-link bordered" [matTooltip]="'Post' | translate" [disabled]="submission.problems.length > 0">
        <mat-icon>send</mat-icon>
      </button>
    </div>
    <div class="col">
      <button class="btn btn-sm btn-link bordered" [matMenuTriggerFor]="additionalMenu" [matTooltip]="'More' | translate">
        <mat-icon>expand_more</mat-icon>
      </button>
    </div>
  </div>

  <mat-menu #additionalMenu="matMenu">
    <button mat-menu-item (click)="fileChange.click()" *ngIf="submission.submissionType === 'SUBMISSION'">{{ 'Change File' | translate }}</button>
    <button mat-menu-item class="warn-text" (click)="deleteSubmission()">{{ 'Delete' | translate }}</button>
  </mat-menu>
  <input #fileChange type="file" class="d-none" (change)="changeFile($event)" single>
</loading-overlay>
